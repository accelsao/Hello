// ?i?i?i?????????????????????????????????????????????????????????????????????????i
// ?i?i?i???i?i?i?i?i?i?i???????????????????????????????i?i?i?????????i???????????i
// ?i?i?i?i?i?i?i???i?i?i?i?i???????????????????????i?i?i?????????????????????????i
// ?i?i?i?i???????????????i?i?i?i?i????????????i?i?i????????????????????????????i
// ?i?i?i???????????????????????i?i???????????????????????????????????????????????i
// ?i?i?i?i???????????????????????i???????????????????????????????????????????????i
// ?i?i?i???i???i?i?i?i?i?i?i?????i?i?i?????????????????i?i?i?i?i?i?i?????????????i
// ?i?i?i?i?i?i?i?i?i?i?i?i?i?i?i?i???i??????????????????????????????????????????i
// ?i?i?i?????????????????????????????i???????????????????????????????????????????i
// ?i?i?i?i???????????????????????????i???????????????????????????????????????????i
// ?i?i?i???i?????????????????????????????????????????????????????????????????????i
// ?i?i?i?i?i?????????????????i???????i???????????????????????????????????????????i
// ?i?i?i?i?i???????????????i?i???????i????????????????????????????????????????i?i
// ?i?i?i?i?i???????????i?i?i?i???????i????????????????????????????????????????i?i
// ?i?i?i?i???i?????????i?i?????????i?i????????????????????????????????????????i?i
// ?i?i?i?i?????i?i?i???????????????i?i??????????????????????????i?????????????i?i
// ?i?i?i?i?i???i?i?i?????????????????i?i?i?i??????????????????i???????????????i?i
// ?i?i?i?i?i?????i???i?i?i???????i?i?i?i?????i???????????????i??????????????i?i?i
// ?i?i?i?i?i?i???i?i???i?i?i?i?i?i?i???????????????????i?i???????????????????i?i?i
// ?i?i?i?i?i?i?i???i?i????????????????????????????????????????????????????i?i?i?i
// ?i?i?i?i?i?i?i?????i?i???????????????????????????????????????????????????i?i?i?i
// ?i?i?i?i?i?i?i?i???????i?i?i?i?i???????????????????????????????????????i?i?i?i?i
// ?i?i?i?i?i?i?i?i?i???????i???????????i?i?i???????????????????????????i?i?i?i?i?i
// ?i?i?i?i?i?i?i?i?i?i???????i???????????i?i?????????????????????????i?i?i?i?i?i?i
// ?i?i?i?i?i?i?i?i?i?i?i?????i?????????i?i?i???????????????????????i?i?i?i?i?i?i?i
// ?i?i?i?i?i?i?i?i?i?i?i?i?i?i???????i?i?i????????????????????i?i?i?i?i?i?i?i?i?i
// ?i?i?i?i?i?i?i?i?i?i?i?i?i?i?i???????i?i???????????????????i?i?i?i?i?i?i?i?i?i?i
#include <bits/stdc++.h>
using namespace std;
//#define DEBUG
#define RE(a,b) memset(a,b,sizeof a)
#define F first
#define S second
#define SZ(x) ((int)(x.size()))
#define PB push_back
#define ALL(X) (X).begin(), (X).end()
using ll = long long;
using ld = long double;
using ull = unsigned long long;
using pii = pair<int,int>;
using C = complex<double>;
const double PI = 3.14159265;
const double eps = 1e-8;
const int N = 2e5 +10;
const int M = 1e9 + 7;
const int inf = 1e9+7;
const ll INF = 1e18;
ll pw(ll a, ll b){ll t=1;a%=M;for(;b;b>>=1){if(b&1){t=t*a%M;}a=a*a%M;}return t;}
ll gcd(ll a, ll b){return b?gcd(b, a%b): a;}

int n;
vector<int> g[N];
int dis;
int dep[N];
int bot[N];
int sz[N];
int ch[N];
void dfs(int u, int p=0){
	sz[bot[u]=u]=1;
	for(const int& v:g[u])
		if(v!=p){
			dep[v]=dep[u]+1;
			dfs(v, u);
			sz[u]+=sz[v];
			if(sz[v]>sz[ch[u]]){
				ch[u]=v;
				bot[u]=bot[v];
			}
		}
}
int find(int u){
	printf("d %d\n", bot[u]);
	fflush(stdout);
	int d, s;
	cin>>d;
	s=(dis+dep[bot[u]]-d)>>1;
	while(dep[u]<s){
		u=ch[u];
	}
	if(dep[u]==dis){
		return u;
	}
	printf("s %d\n", u);
	fflush(stdout);
	cin>>s;
	return find(s);
}
int main(){
	ios::sync_with_stdio(0),cin.tie(0),cout.tie(0);
	cin>>n;
	int u, v;
	for(int i=1;i<n;i++){
		cin>>u>>v;
		g[u].PB(v);
		g[v].PB(u);
	}
	printf("d 1\n");
	fflush(stdout);
	cin>>dis;
	if(dis==0){
		puts("! 1");
		return 0;
	}
	dfs(1);
	#ifdef DEBUG
		for(int i=1;i<=n;i++)
			printf("dep[%d]=%d\n", i, dep[i]);
	#endif
	printf("! %d\n", find(1));
	fflush(stdout);
	
}

/*
#ifdef DEBUG
	cout<<"I Love Co shu Nie [ https://coshunie.com/ ]"
#endif

6
1 2
2 3
3 4
4 5
4 6

*/
